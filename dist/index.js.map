{"version":3,"file":"index.js","sources":["../src/mergeArrayElements.js","../src/plugins.js","../src/options-module.js","../src/options-syntax.js","../src/options-minify.js","../src/babel.js"],"sourcesContent":["export const mergeArrayElements = (\n  firstArray,\n  secondArray,\n  compare = (a, b) => a.name === b.name,\n) => {\n  const mergedElements = []\n\n  firstArray.forEach((elementInFirstArray) => {\n    const existingRule = secondArray.find((elementInSecondArray) => {\n      return compare(elementInFirstArray, elementInSecondArray)\n    })\n    if (!existingRule) {\n      mergedElements.push({ ...elementInFirstArray })\n    }\n  })\n\n  secondArray.forEach((elementInSecondArray) => {\n    mergedElements.push({\n      ...(firstArray.find((elementInFirstArray) =>\n        compare(elementInFirstArray, elementInSecondArray),\n      ) || {}),\n      ...elementInSecondArray,\n    })\n  })\n\n  return mergedElements\n}\n","// syntax\nexport const arrowFunction = {\n  name: \"@babel/transform-arrow-functions\",\n}\n\nexport const blockScopedFunction = {\n  name: \"@babel/transform-block-scoped-functions\",\n}\n\nexport const blockScoping = {\n  name: \"@babel/transform-block-scoping\",\n}\n\nexport const classPlugin = {\n  name: \"@babel/transform-classes\",\n}\n\nexport const computedProperty = {\n  name: \"@babel/transform-computed-properties\",\n}\n\nexport const destructuring = {\n  name: \"@babel/transform-destructuring\",\n}\n\nexport const duplicateKeys = {\n  name: \"@babel/transform-duplicate-keys\",\n}\n\nexport const forOf = {\n  name: \"@babel/transform-for-of\",\n}\n\nexport const functionName = {\n  name: \"@babel/transform-function-name\",\n}\n\nexport const ES2015Literals = {\n  name: \"@babel/transform-literals\",\n}\n\nexport const objectSuper = {\n  name: \"@babel/transform-object-super\",\n}\n\nexport const ES2015Parameters = {\n  name: \"@babel/transform-parameters\",\n}\n\nexport const shorthandProperty = {\n  name: \"@babel/transform-shorthand-properties\",\n}\n\nexport const spreadOperator = {\n  name: \"@babel/transform-spread\",\n}\n\nexport const stickyRegex = {\n  name: \"@babel/transform-sticky-regex\",\n}\n\nexport const templateLiterals = {\n  name: \"@babel/transform-template-literals\",\n}\n\nexport const unicodeRegex = {\n  name: \"@babel/transform-unicode-regex\",\n}\n\nexport const memberExpressionLiteral = {\n  name: \"@babel/transform-member-expression-literals\",\n}\n\nexport const propertyLiteral = {\n  name: \"@babel/transform-property-literals\",\n}\n\nexport const propertyMutator = {\n  name: \"@babel/transform-property-mutators\",\n}\n\nexport const exponentiationOperator = {\n  name: \"@babel/transform-exponentiation-operator\",\n}\n\nexport const objectRestSpreadOperator = {\n  name: \"@babel/proposal-object-rest-spread\",\n}\n\nexport const regenerator = {\n  name: \"@babel/transform-regenerator\",\n}\n\n// module\nexport const transformModuleCommonJS = {\n  name: \"@babel/transform-modules-commonjs\",\n}\n\nexport const transformModuleSystemJS = {\n  name: \"@babel/transform-modules-systemjs\",\n}\n\nexport const transformAsyncToGenerator = {\n  name: \"@babel/transform-async-to-generator\",\n}\n\n// minification\nexport const minifyConstantFolding = {\n  name: \"minify-constant-folding\",\n}\n\nexport const minifyDeadCodeElimination = {\n  name: \"minify-dead-code-elimination\",\n  settings: {\n    keepFnName: true,\n    keepFnArgs: true,\n    keepClassName: true,\n  },\n}\n\nexport const minifyGuardedExpression = {\n  name: \"minify-guarded-expressions\",\n}\n\nexport const minifyMangleNames = {\n  name: \"minify-mangle-names\",\n  settings: {\n    keepFnName: true,\n    keepClassName: true,\n  },\n}\n\nexport const minifySimplify = {\n  name: \"minify-simplify\",\n}\n\nexport const minifyTypeConstructor = {\n  name: \"minify-type-constructors\",\n}\n\nexport const transformMergeSiblingVariable = {\n  name: \"transform-merge-sibling-variables\",\n}\n\nexport const transformMinifyBoolean = {\n  name: \"transform-minify-booleans\",\n}\n\nexport const transformSimplifyComparisonOperator = {\n  name: \"transform-simplify-comparison-operators\",\n}\n\nexport const transformUndefinedToVoid = {\n  name: \"transform-undefined-to-void\",\n}\n","import { transformModuleCommonJS, transformModuleSystemJS } from \"./plugins.js\"\n\nconst getModuleTransformPlugin = (inputFormat, outputFormat) => {\n  if (outputFormat === \"cjs\") {\n    if (inputFormat === \"es\") {\n      return transformModuleCommonJS\n    }\n    throw new Error(\n      `unexpected ${inputFormat} input format combined with ${outputFormat} output format`,\n    )\n  }\n  if (outputFormat === \"systemjs\") {\n    // https://github.com/ModuleLoader/es-module-loader/blob/master/docs/system-register-dynamic.md\n    if (inputFormat === \"es\") {\n      return transformModuleSystemJS\n    }\n    throw new Error(\n      `unexpected ${inputFormat} input format combined with ${outputFormat} output format`,\n    )\n  }\n  throw new Error(`unexpected ${outputFormat} output format`)\n}\n\nexport const createModuleOptions = ({ inputModuleFormat, outputModuleFormat }) => {\n  if (outputModuleFormat !== undefined && outputModuleFormat !== inputModuleFormat) {\n    const plugin = getModuleTransformPlugin(inputModuleFormat, outputModuleFormat)\n    return {\n      plugins: [\n        {\n          ...plugin,\n          enabled: true,\n        },\n      ],\n    }\n  }\n  return {}\n}\n","import {\n  arrowFunction,\n  blockScopedFunction,\n  blockScoping,\n  classPlugin,\n  computedProperty,\n  destructuring,\n  duplicateKeys,\n  ES2015Literals,\n  ES2015Parameters,\n  exponentiationOperator,\n  forOf,\n  functionName,\n  memberExpressionLiteral,\n  objectRestSpreadOperator,\n  objectSuper,\n  propertyLiteral,\n  propertyMutator,\n  regenerator,\n  shorthandProperty,\n  spreadOperator,\n  stickyRegex,\n  templateLiterals,\n  unicodeRegex,\n} from \"./plugins.js\"\n\nconst plugins = [\n  arrowFunction,\n  blockScopedFunction,\n  blockScoping,\n  classPlugin,\n  computedProperty,\n  destructuring,\n  duplicateKeys,\n  forOf,\n  functionName,\n  ES2015Literals,\n  objectSuper,\n  ES2015Parameters,\n  shorthandProperty,\n  spreadOperator,\n  stickyRegex,\n  templateLiterals,\n  unicodeRegex,\n  memberExpressionLiteral,\n  propertyLiteral,\n  propertyMutator,\n  exponentiationOperator,\n  objectRestSpreadOperator,\n  regenerator,\n].map((plugin) => {\n  return {\n    ...plugin,\n    enabled: true,\n  }\n})\n\nexport const createSyntaxOptions = () => {\n  return {\n    plugins,\n  }\n}\n","import {\n  minifyConstantFolding,\n  minifyDeadCodeElimination,\n  minifyGuardedExpression,\n  minifyMangleNames,\n  minifySimplify,\n  minifyTypeConstructor,\n  transformMergeSiblingVariable,\n  transformMinifyBoolean,\n  transformSimplifyComparisonOperator,\n  transformUndefinedToVoid,\n} from \"./plugins.js\"\n\nconst plugins = [\n  minifyConstantFolding,\n  minifyDeadCodeElimination,\n  minifyGuardedExpression,\n  minifyMangleNames,\n  minifySimplify,\n  minifyTypeConstructor,\n  transformMergeSiblingVariable,\n  transformMinifyBoolean,\n  transformSimplifyComparisonOperator,\n  transformUndefinedToVoid,\n].map((plugin) => {\n  return {\n    ...plugin,\n    enabled: true,\n  }\n})\n\nexport const createMinifyOptions = () => {\n  return {\n    plugins,\n    compact: true,\n    comments: true,\n    minified: true,\n  }\n}\n","// https://babeljs.io/docs/plugins/\n// https://github.com/babel/babel/tree/master/packages/babel-plugin-syntax-dynamic-import\n\nimport { mergeArrayElements } from \"./mergeArrayElements.js\"\nimport { createModuleOptions } from \"./options-module.js\"\nimport { createSyntaxOptions } from \"./options-syntax.js\"\nimport { createMinifyOptions } from \"./options-minify.js\"\n\nexport { createModuleOptions }\n\nexport { createSyntaxOptions }\n\nexport { createMinifyOptions }\n\nexport const mergeOptions = (...objects) => {\n  const options = objects.reduce(\n    (accumulator, object) => {\n      if (typeof object === undefined || object === null) {\n        return accumulator\n      }\n      return {\n        ...accumulator,\n        ...object,\n        presets: object.presets ? [...accumulator.presets, ...object.presets] : accumulator.presets,\n        plugins: object.plugins\n          ? mergeArrayElements(accumulator.plugins, object.plugins)\n          : accumulator.plugins,\n      }\n    },\n    {\n      presets: [],\n      plugins: [],\n    },\n  )\n\n  return options\n}\n\nexport const createConfig = (options) => {\n  return {\n    ...options,\n    plugins: options.plugins.filter((plugin) => plugin.enabled).map((plugin) => {\n      return [plugin.name, plugin.settings]\n    }),\n  }\n}\n\nexport const config = createConfig(\n  mergeOptions(\n    createModuleOptions({\n      inputModuleFormat: \"es\",\n      outputModuleFormat: \"cjs\",\n    }),\n    createSyntaxOptions(),\n  ),\n)\n"],"names":["mergeArrayElements","firstArray","secondArray","compare","a","b","name","mergedElements","forEach","elementInFirstArray","existingRule","find","elementInSecondArray","push","arrowFunction","blockScopedFunction","blockScoping","classPlugin","computedProperty","destructuring","duplicateKeys","forOf","functionName","ES2015Literals","objectSuper","ES2015Parameters","shorthandProperty","spreadOperator","stickyRegex","templateLiterals","unicodeRegex","memberExpressionLiteral","propertyLiteral","propertyMutator","exponentiationOperator","objectRestSpreadOperator","regenerator","transformModuleCommonJS","transformModuleSystemJS","minifyConstantFolding","minifyDeadCodeElimination","settings","keepFnName","keepFnArgs","keepClassName","minifyGuardedExpression","minifyMangleNames","minifySimplify","minifyTypeConstructor","transformMergeSiblingVariable","transformMinifyBoolean","transformSimplifyComparisonOperator","transformUndefinedToVoid","getModuleTransformPlugin","inputFormat","outputFormat","Error","createModuleOptions","inputModuleFormat","outputModuleFormat","undefined","plugin","plugins","enabled","map","createSyntaxOptions","createMinifyOptions","compact","comments","minified","mergeOptions","objects","options","reduce","accumulator","object","presets","createConfig","filter","config"],"mappings":"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"}